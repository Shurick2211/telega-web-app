<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
<h3 >Api key!</h3>
<input type="text" id="key">
<h3 >Api secret!</h3>
<input type="text" id="secret">
<p id="pteg">Hello user! </p>
<button id="ok" onclick="clickOK()">OK</button>
<script>

  const tg = window.Telegram.WebApp;
  let response;
  tg.ready();
    var initData = tg.initData || '';
    var initDataUnsafe = tg.initDataUnsafe || {};


  function webviewClose() {
    tg.sendData(response.toString());
  }
  class Resp{
    api_key;
    api_secret;
  }

  let key = document.getElementById("key");
  let secret = document.getElementById("secret");
  let isKey = false;
  let isSecret = false;

  function keyIsNotEmpty(e){
    if (e.target.value !== null &&
    e.target.value !=="" ) isKey = true;
  }
  function secretIsNotEmpty(e){
    if ((e.target.value !== null &&
            e.target.value !=="") && isKey) isSecret = true;
  }

  function clickOK() {
    if (isSecret && isKey) {
      const disp = document.getElementById("pteg");
      const resp = new Resp();
      resp.api_key = key.value.toString();
      resp.api_secret = secret.value.toString();
      response = JSON.stringify(resp);
      disp.innerText = response;
      tg.MainButton.show();
    }
  }

  tg.MainButton.text='Registration';
  tg.MainButton.color='#2cab37';
  tg.MainButton.textColor='#FFFFFF';
  tg.MainButton.onClick(webviewClose);

  key.addEventListener("focusout", keyIsNotEmpty);
  secret.addEventListener("focusout", secretIsNotEmpty);

</script>
</body>
</html>